<!--<!DOCTYPE html>-->
<!--<html lang="vi">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <title>Thử nghiệm confirm</title>-->
<!--</head>-->
<!--<body>-->
<!--<script>-->
<!--  class Mobile {-->
<!--    tinDaGui = [];-->
<!--    tinDaNhan = [];-->
<!--    constructor() {-->
<!--    }-->
<!--    getTinDaGui() {-->
<!--      return this.tinDaGui;-->
<!--    }-->

<!--    getTinDaNhan() {-->
<!--      return this.tinDaNhan;-->
<!--    }-->
<!--    guiTinNhan(mobile, message) {-->
<!--      this.tinDaGui.push(message);-->
<!--      mobile.getTinDaNhan().push(message);-->
<!--    }-->
<!--  }-->
<!--  let iphone = new Mobile();-->
<!--  let nokia = new Mobile();-->
<!--  console.log({iphone, nokia})-->
<!--  let mes = prompt("Nhap tin nhan")-->
<!--  iphone.guiTinNhan(nokia, mes)-->
<!--  console.log({iphone, nokia})-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<h3>Nokia</h3>
<table>
  <tr>
    <td>
      <button onclick="turnOn()">On</button>
    </td>
    <td>
      <button onclick="turnOff()">Off</button>
    </td>
  </tr>
  <tr>
    <td>
      <div id="text">
        <button onclick="sent()">texting</button>
      </div>
    </td>
    <td>
      <button onclick="draft()">Draft Messenger</button>
    </td>
  </tr>
  <tr>
    <td>
      <button onclick="charger()">Charger Phone</button>
    </td>
    <td>
      <button onclick="receiveMessage()">Receive Message</button>
    </td>
  </tr>
  <tr>
    <td>
      <button onclick="sendMessage()">Send Message</button>
    </td>
    <td>
      <button onclick="viewSentMessages()">View Sent Messages</button>
    </td>
  </tr>
  <tr>
    <td>
      <button onclick="viewInbox()">View Inbox</button>
    </td>
  </tr>
</table>
</body>
<script>

  class Mobile {
    constructor(status, texting, battery, draft, charger) {
      this.status = status;
      this.battery = battery = 100;
      this.texting = texting;
      this.draft = [];
      this.charger = charger;
      this.sentMessages = [];
      this.inbox = [];
    }

    saveDraft(text){
      this.draft.push(text);
    }

    getDraft(){
      return this.draft;
    }

    checkDraft(){
      if (!this.status) {
        alert("Bạn chưa bật điện thoại!")
      }
      this.battery--;
    }

    setCharger(charger) {
      this.charger = charger;
    }

    getCharger() {
      return this.charger;
    }

    checkCharger() {
      if (confirm(`Xác nhận sạc pin`)) {
        alert(`Bạn đang sạc điện thoại!`);
        if (this.battery < 100) {
          this.battery = 100;
          alert('Bạn đã sạc thành công!')
        }
      } else {
        alert(`Bạn chưa sạc điện thoại`);
      }
    }

    setTexting(texting) {
      this.texting = texting;
    }

    getTexting() {
      return this.texting;
    }

    checkTexting() {
      if (!this.status) {
        alert("Bạn chưa bật điện thoại!")
      }
      this.battery--;
    }

    setStatus(status) {
      this.status = status;
      this.battery--;
    }

    getStatus() {
      return this.status;
    }

    checkStatus() {
      if (this.status) {
        alert("Điện thoại đang bật!")
      } else {
        alert("Điện thoại đang tắt!")
      }
    }

    saveSentMessage(text){
      this.sentMessages.push(text);
    }

    getSentMessages(){
      return this.sentMessages;
    }

    viewSentMessages(){
      if (this.sentMessages.length > 0) {
        let sentMessageText = "Tin đã gửi:\n";
        for (let i = 0; i < this.sentMessages.length; i++) {
          sentMessageText += (i + 1) + ". " + this.sentMessages[i] + "\n";
        }
        alert(sentMessageText);
      } else {
        alert("Không có tin đã gửi.");
      }
    }

    receiveMessage(text){
      this.inbox.push(text);
    }

    getInbox(){
      return this.inbox;
    }

    viewInbox(){
      if (this.inbox.length > 0) {
        let inboxText = "Hộp thư đến:\n";
        for (let i = 0; i < this.inbox.length; i++) {
          inboxText += (i + 1) + ". " + this.inbox[i] + "\n";
        }
        alert(inboxText);
      } else {
        alert("Hộp thư đến trống rỗng.");
      }
    }
  }

  let nokia = new Mobile();

  console.log(nokia);
  nokia.checkStatus();

  function turnOn() {
    nokia.setStatus(true);
    nokia.checkStatus();
    console.log(nokia);
  }

  function turnOff() {
    nokia.setStatus(false);
    nokia.checkStatus();
    console.log(nokia);
  }

  function sent() {
    nokia.checkTexting(true);
    if (nokia.getStatus()) {
      let input = "<table>\n" +
              "    <tr>\n" +
              "        <td>\n" +
              "            <textarea id='messenger'></textarea>\n" +
              "        </td>\n" +
              "    </tr>\n" +
              "    <tr>\n" +
              "        <td>\n" +
              "            <button onclick='send()'>Sent</button>\n" +
              "        </td>\n" +
              "        <td>\n" +
              "            <button onclick='cancel()'>Cancel</button>\n" +
              "        </td>\n" +
              "    </tr>\n" +
              "</table>";
      nokia.setTexting(true);
      document.getElementById(`text`).innerHTML = input;
      console.log(nokia);
    }
  }

  function send() {
    let message = document.getElementById('messenger').value;
    if (message) {
      nokia.saveSentMessage(message);
      alert("Tin nhắn đã được gửi: " + message);
    }
  }

  function cancel() {
    let messenger = document.getElementById('messenger').value;
    if (messenger) {
      nokia.saveDraft(messenger);
      alert('Đã lưu vào bản nháp!');
    }
    document.getElementById('text').innerHTML = '<button onclick="sent()">texting</button>';
    nokia.setTexting(false);
    document.getElementById('messenger').value = "";
    this.battery--;
  }

  function draft() {
    if (nokia.getStatus()) {
      let drafts = nokia.getDraft();
      if (drafts.length > 0) {
        let draftText = "Các bản nháp trước đó:\n";
        for (let i = 0; i < drafts.length; i++) {
          draftText += i + 1 + drafts[i] + "<br>";
        }
        alert(draftText);
      } else {
        alert("Chưa có bản nháp nào.");
      }
    } else {
      alert("Bạn chưa bật điện thoại!");
    }
  }

  function charger() {
    nokia.setStatus(true);
    nokia.setCharger(true);
    nokia.checkCharger();
    console.log(nokia);
  }

  function receiveMessage() {
    if (nokia.getStatus()) {
      let message = prompt("Nhập tin nhắn nhận được từ một chiếc điện thoại khác:");
      if (message) {
        nokia.receiveMessage(message);
        alert("Đã nhận tin nhắn: " + message);
      }
    } else {
      alert("Bạn chưa bật điện thoại!");
    }
  }

  function sendMessage() {
    if (nokia.getStatus()) {
      let message = prompt("Nhập tin nhắn để gửi đến một chiếc điện thoại khác:");
      if (message) {
        // Thực hiện gửi tin nhắn tới một chiếc điện thoại khác ở đây (bạn có thể thêm logic sau này)
        alert("Đã gửi tin nhắn: " + message);
      }
    } else {
      alert("Bạn chưa bật điện thoại!");
    }
  }

  function viewSentMessages() {
    nokia.viewSentMessages()
  }

  function viewInbox() {
    nokia.viewInbox();
  }
</script>
</html>
